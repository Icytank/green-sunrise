---
export const prerender = true;
export function getStaticPaths() {
	return [{ params: { lang: "bg" } }, { params: { lang: "en" } }];
}
const { lang } = Astro.params as { lang: "bg" | "en" };

// Utils
import { getImage } from "astro:assets";
import { getCollection } from "astro:content";
import { t } from "@utils/i18n-helpers";

// Components
import BaseLayout from "@layouts/BaseLayout.astro";
import Banner from "@components/Banner/Banner.astro";
import AboutIntro from "@components/AboutIntro.astro";
import AboutMission from "@components/AboutMission.astro";
import AboutValues from "@components/AboutValues.astro";
import SectionHeader from "@components/SectionHeader.astro";
import TeamMember from "@components/TeamMember.astro";

// Images
import landingImage from "@assets/images/about-header.png";
const optimizedImage = await getImage({ src: landingImage, format: "webp" });

// Data
const teamMembers = await getCollection("teams", ({ id }) => {
    return id.startsWith(`${lang}/`);
});
---


<BaseLayout lang={lang} title={lang === 'bg' ? 'За нас' : 'About'} description="Meta description for the page" heroImage={optimizedImage}>
	<Banner title={lang === 'bg' ? 'За нас' : 'About Us'} image={optimizedImage} />

    <AboutIntro lang={lang} />
    <AboutMission lang={lang} />
    <AboutValues lang={lang} />

	<section id="team" class="team-section">
		<div class="container">
			<SectionHeader 
				label={t('team.label', lang)}
				title={t('team.title', lang)}
				description={t('team.subtitle', lang)}
				align="center"
			/>
			<div class="team-grid">
				{teamMembers.map((member) => (
					<TeamMember 
						name={member.data.name}
						role={member.data.role}
						certifications={member.data.certifications}
						yearsExperience={member.data.yearsExperience}
						verified={member.data.verified}
						avatar={member.data.avatar}
						lang={lang}
					/>
				))}
			</div>
		</div>
	</section>
</BaseLayout>

<style>
	.team-section {
		padding: var(--gs-section-padding);
		background: var(--gs-background);
	}

	.container {
		max-width: 1280px;
		margin: 0 auto;
		padding: 0 var(--gs-space-2);
	}

	.section-header {
		text-align: center;
		margin-bottom: var(--gs-space-6);
	}

	.section-title {
		font-size: var(--gs-text-h2);
		color: var(--gs-institutional-green);
		margin-bottom: var(--gs-space-2);
		font-weight: 800;
	}

	.section-subtitle {
		font-size: var(--gs-text-base);
		color: var(--gs-slate-gray);
		max-width: 600px;
		margin: 0 auto;
		line-height: 1.6;
	}

	.team-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
		gap: var(--gs-space-4);
	}

	@media (min-width: 768px) {
		.team-grid {
			grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
			gap: var(--gs-space-6);
		}
	}
</style>
